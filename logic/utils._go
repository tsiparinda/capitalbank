package logic

import (
	"fmt"
	"time"
)

type DataCheckBalance struct {
	Dpd         string // date
	BankRegistr string // registr of bank account in the capital2010
	FBAD        bool   // state of bank account's saldo in the capital2010
}

func findEarliestDateWithFBADTrue(data []DataCheckBalance) (string, error) {
	earliestDate := time.Time{}
	found := false

	for _, entry := range data {
		if entry.FBAD {
			date, err := time.Parse("2006-01-02", entry.Dpd)
			if err != nil {
				return "", err
			}

			if !found || date.Before(earliestDate) {
				earliestDate = date
				found = true
			}
		}
	}

	if !found {
		return "", fmt.Errorf("no entries with FBAD set to true")
	}

	return earliestDate.Format("2006-01-02"), nil
}

func main() {
	// Example data
	data := []DataCheckBalance{
		{Dpd: "2023-05-15", BankRegistr: "XYZ123", FBAD: false},
		{Dpd: "2023-05-10", BankRegistr: "ABC456", FBAD: true},
		{Dpd: "2023-05-12", BankRegistr: "DEF789", FBAD: true},
		{Dpd: "2023-05-08", BankRegistr: "GHI012", FBAD: false},
	}

	// Find the earliest date with FBAD set to true
	earliestDate, err := findEarliestDateWithFBADTrue(data)
	if err != nil {
		fmt.Println("Error:", err)
	} else {
		fmt.Println("Earliest date with FBAD = true:", earliestDate)
	}
}
